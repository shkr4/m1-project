{% extends "base.html" %}
{% block title %}{{current_user.username}}{% endblock %}

{% block style %}

<style>
    table, th, td {
      border:1px solid black;
      text-align: center;
    }
</style>

{% endblock %}

{% block content %}

<div style="background-color: aliceblue; padding: 15px;">
    <h1>Dashboard of <u>{{current_user.name}}</u></h1>
</div>

<div style="background-color: azure; padding: 15px;">
    <h2>Business Name: {{professional.business_name}}</h2>
</div>

{% if professional.orders %}
    <h2 style="color: rosybrown; padding: 15px;">Your Orders:</h2>
    <div style="width: 75%; max-height: 400px; overflow-y: auto; border: 1px solid #ccc; padding: 25px; background-color: #F3FEB8;">
        <table style="width:80%">
            <tr>
                <th>Order ID</th>
                <th>Customer Name</th>
                <th>Service Name</th>
                <th>Customer Address</th>
                <th>Booked On</th>
                <th>Closed On</th>
                <th>Closed By</th>
                <th>Status</th>
                <th>Rating By Customer</th>
                <th>Remark By Customer</th>
                <th>Action</th>
            </tr>
            {% for order in orders %}
        
                <tr>
                    <td>{{order.order_id}}</td>
                    <td>{{order.user.name}}</td>
                    <td>{{order.service}}</td>
                    <td>{{order.user.address}}</td>
                    <td>{{order.booked_at}}</td>
                    <td>{{order.closed_at}}</td>
                    <td>{{order.closed_by}}</td>
                    <td>{{order.status}}</td>
                    <td>{{order.rating}}</td>
                    <td>{{order.remark_by_customer}}</td>
                    <td>
                        {% if order.status == "requested" %}
                        <form method="post" action="/accept_reject_it">
                                <input type="hidden" name="order_id" value="{{order.order_id}}">
                                <!-- <input type="hidden" name="reject" value="reject">
                                <input type="hidden" name="accept" value="accept"> -->
                                <input type="submit" name="b_value" value="Accept">
                                <input type="submit" name="b_value" value="Reject">
                            </form>                    
                        {% else %}

                        {% endif %}
                    </td>
                </tr>
        
            {% endfor %}
        </table>
    </div>
<!-- </form>
        <ol>
            {% for order in orders %}
                <li>
                    <p>Order ID: {{order.order_id}}</p>
                    <p>Customer's Name: {{order.user.name}}</p>
                    <p>Status: {{order.status}}</p>
                    <p>Booking Date: {{order.booked_at}}</p>
                    {% if order.status == "requested" %}
                        <div>
                            <form method="post" action="/accept_reject_it">
                                <input type="hidden" name="order_id" value="{{order.order_id}}">
                                <input type="hidden" name="reject" value="reject">
                                <input type="hidden" name="accept" value="accept">
                                <input type="submit" name="b_value" value="Accept">
                                <input type="submit" name="b_value" value="Reject">
                            </form>
                        </div>
                    
                    {% else %}

                        <div>
                            <p>Rating You recieved for this order: {{order.rating}}</p>
                        </div>

                    {% endif %}
                </li>
            {% endfor %}
        </ol>
    </div>
<table>
    <tr>
        <th><b>Order Id</b></th>
        <th></th>
    </tr>
</table>
{% endif %} -->

    

{% if current_user.role == "customer" %}
<div style="position: absolute; right: 0; bottom: 0;">
    <a href="{{url_for('main.reg_professional')}}">Register as Service Provider</a>
</div>
{% endif %}


{% endblock %}

